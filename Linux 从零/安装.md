# 1. 安装系统

## 1.1 下载系统并制作系统盘

* 下载Ubuntu20.04(ubuntu-20.04.6-desktop-amd64.iso): https://releases.ubuntu.com/focal/?_ga=2.58049068.740862085.1703733184-1626790153.1703733184&_gac=1.249193333.1703733184.CjwKCAiAs6-sBhBmEiwA1Nl8swdy75H5O9FJQcaT3nZDA_qxCxKw5YLguF5ZogUOdRMgvtJ81dFpIBoC7ycQAvD_BwE
* 下载rufus制作工具：https://rufus.ie/zh/
  * 分区类型GPT
  * 文件系统FAT32





## 1.2 安装系统

我的是联想Y9000P，因此

* F2进入bios，设置U盘启动以及==关闭安全模式==

* 设置独显模式而非混合模式

* 在U盘启动的grub界面，按e进入编辑，在quiet splash后面加入nomodeset，看起来应该为如下，这一步不做会黑屏

  ```bash
  *** quiet splash nomodeset ***
  ```

* 正常安装并重启

* 同样在grub界面添加nomodeset

* 进入系统





## 1.3 系统初始化

进入系统后：

* 更新系统

  ```bash
  sudo apt update
  sudo apt upgrade
  ```

  

* 安装nvidia驱动程序

  ```bash
  ubuntu-drivers devices
  sudo apt install nvidia-driver-xxx
  sudo reboot
  ```

  * 第一条展示了可用的driver,另一种方式是输入`sudo apt install nvidia-driver-`然后按两次tab。
  * 第二条你可能看见三种，分别是
    * `nvidia-driver-xxx`,这是NVIDIA官方提供的闭源驱动程序的标准版。它通常提供最佳的性能和最广泛的功能支持。
    * `nvidia-driver-xxx`-open,这可能是开源版本的NVIDIA驱动程序，但NVIDIA的开源驱动通常不提供与闭源驱动相同的性能或功能。
    * `nvidia-driver-xxx-server`,这是专为服务器环境优化的NVIDIA驱动程序。它可能包括针对长期运行和特定类型计算任务的优化。
  * 重启后，运行`nvidia-smi`，出现版本信息即为成功。

* 如果安装过后发现nvidia-smi没用，说明安装错了，按照如下删除即可

  * ### 1. 确定已安装的驱动程序

    首先，你需要知道当前安装了哪个版本的NVIDIA驱动程序。打开终端并运行以下命令：

    ```bash
    dpkg -l | grep nvidia-driver
    ```

    这将列出所有与NVIDIA驱动程序相关的包及其版本号。

    ### 2. 卸载NVIDIA驱动程序

    使用apt命令来卸载驱动程序。如果上一步中显示你安装了`nvidia-driver-xxx`（其中xxx是版本号），你可以使用以下命令来卸载它：

    ```bash
    sudo apt-get remove --purge nvidia-driver-xxx
    ```

    将`xxx`替换为你实际安装的版本号。

    ### 3. 卸载相关软件

    NVIDIA驱动程序可能还安装了一些相关的软件包。要彻底删除所有东西，你也可能需要卸载这些。可以运行以下命令查看并卸载这些包：

    ```bash
    dpkg -l | grep nvidia
    ```

    然后，使用`sudo apt-get remove --purge package-name`命令来卸载它们，其中`package-name`是你想要卸载的包的名称。

    ### 4. 更新initramfs

    更新initramfs以应用更改。这将确保系统不会在下次启动时尝试加载已卸载的NVIDIA驱动程序：

    ```bash
    sudo update-initramfs -u
    ```



## 1.4 安装Clash

地址https://www.clash.la/releases/

下载Clash.for.Windows-0.20.39-x64-linux.tar.gz

```bash
Clash.for.Windows-0.20.39-x64-linux.tar.gz
```

然后执行

```c++
./cfw
```

即可打开clash

接下来

* 看准General中的port，然后将
  * ubuntu设置的Network-Network Proxy改为Manual， HTTP Proxy,HTTPS Proxy设置为127.0.0.1，port为自己的port。
  * 设置Start with linux为开
  * 设置Allow LAN为bind 127.0.0.1，打开。
  * 进入Profiles导入订阅URL，download即可。
  * 进入proxy选择节点，如果想关闭就在右上角的猫图表选择direct。







> 打开链接：[https://archive.org/download/clash_for_windows_pkg](https://link.zhihu.com/?target=https%3A//archive.org/download/clash_for_windows_pkg)
>
> 下载：
>
> ![img](https://pic4.zhimg.com/80/v2-318fc912a431d79f355cfdee8d351f0b_1440w.webp)
>
> 解压：
>
> ```text
> tar -xzvf Clash.for.windows-0.20.39-x64-linux.tar.gz
> ```
>
> 进入解压后文件夹：
>
> ```text
> cd  Clash.for.windows-0.20.39-x64-linux
> ```
>
> 运行界面：
>
> ```text
> ./cfw
> ```
>
> 出现右边clash界面：
>
> ![img](https://pic3.zhimg.com/80/v2-1e095edd142481ba8d8f638e7437fcbe_1440w.webp)
>
> 添加订阅后，修改设置-Network-Network Proxy ,改为Manual，然后将右边clash的prot端口号写到左边就好了。







## 1.5 安装git

```bash
sudo apt update
sudo apt install git
//设置每次pull requrst时，管理员能看到的信息
git config --global user.name "Your name"
git config --global user.email "Your email"

//使用SSH key登陆
//生成公钥,一路enter即可，若有overwrite直接overwrite
ssh-keygen -t rsa -b 4096 -C "Your email"
//复制
cat ~/.ssh/id_rsa.pub | xclip -selection clipboard



```

然后进入github-setting-ssh key-Add ssh key

测试连接，第一次连接会展示目标服务器的SHA256，选择yes即可

```bash
ssh -T git@github.com
```

成功

> Hi thestuckedcat! You've successfully authenticated, but GitHub does not provide shell access.

注意，如果你使用SSH连接Github，那么clone的时候必须使用SSH URL clone。

对于linux，不使用SSH就需要输入PAT来pull和push

对于windows，有windows github，不用设置这些繁琐的，只需要下载gitbash即可。
